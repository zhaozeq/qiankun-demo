(window["webpackJsonp_sub-editors"]=window["webpackJsonp_sub-editors"]||[]).push([[5],{476:function(n,e,s){"use strict";s.d(e,"a",(function(){return d}));var t=s(7),o=s(1),a=s(484),c=s(478),i=s(477),l=s.n(i),r=s(45);function d(n){var e=n.value,s=Object(o.useState)(e),i=Object(t.a)(s,2),d=i[0],u=i[1];return Object(r.jsxs)("div",{className:l.a.coder,children:[Object(r.jsx)(a.a,{size:"small",type:"primary",onClick:function(){window.postMessage(d,window.location.origin+"/iframe")},children:"\u8fd0\u884c"}),Object(r.jsx)(c.Controlled,{value:d,options:{mode:"javascript",theme:"darcula",lineNumbers:!0},onBeforeChange:function(n,e,s){u(s)}})]})}s(480)},477:function(n,e,s){n.exports={coder:"MKwqpkekF15zF_ZpyF_j_",lineBlock:"_3Lm431ZyN2A2dgkGNPGE1P"}},482:function(n,e,s){n.exports={wrap:"okLaQw4dpYuqaQTchKj7m",block:"_3zIqwbjJ6ybkgZBw9h01mo"}},486:function(n,e,s){"use strict";s.r(e);var t=s(7),o=s(1),a=s(482),c=s.n(a),i=s(476),l=[{title:"\u4e00\u7ec4\u7ebf\u6027\u6570\u636e\u7684\u9884\u6d4b",code:"async function doTraining(model) {\n  await model.fit(xs, ys, { // \u57f9\u8bad\u51fd\u6570 \u5c06xs\u62df\u5408\u4e3ays\n    epochs: 500, \n    callbacks: {\n      onEpochEnd: async (epoch, logs) => {\n        console.log('Epoch:'+ epoch, 'Loss:'+ logs.loss); // \u6253\u5370epoch\u65e5\u5fd7 \u548c \u671f\u95f4\u635f\u5931\n      },\n    },\n  });\n}\nconst model = tf.sequential(); // \u5e8f\u5217\u6a21\u578b\nmodel.add(tf.layers.dense({ units: 1, inputShape: [1] }));\nmodel.compile({ loss: 'meanSquaredError', optimizer: 'sgd' }); // \u5747\u65b9\u8bef\u5dee\u635f\u5931 \u548c \u4f18\u5316\u5668 \nmodel.summary(); // \u6253\u5370\u6a21\u578b\u6982\u51b5\n\n// \u62e5\u67096\u4e2a\u5143\u7d20\u7684\u4e00\u4f4d\u6570\u7ec4 \u9884\u6d4b\u7ed3\u679c\u5e94\u5f53\u662f\u63a5\u8fd1 2X-1\nconst xs = tf.tensor2d([-1.0, 0.0, 1.0, 2.0, 3.0, 4.0], [6, 1]); \nconst ys = tf.tensor2d([-3.0, -1.0, 2.0, 3.0, 5.0, 7.0], [6, 1]);\ndoTraining(model).then(() => {\n  alert(model.predict(tf.tensor2d([10], [1, 1]))); // \u7ed3\u679c\u5e94\u5f53\u63a5\u8fd1 19\n});\n"},{title:"\u5206\u7c7b\u8bad\u7ec3",code:"async function run() {\n    const csvUrl = './train-datas/iris.csv';\n    const trainingData = tf.data.csv(csvUrl, {\n      columnConfigs: {\n        species: { // \u6307\u5b9a species\u5217 \u4e3alabel\n          isLabel: true,\n        },\n      },\n    });\n  \n    const numOfFeatures = (await trainingData.columnNames()).length - 1; // \u51cf\u4e00\u53bb\u9664species\u5217\n    const numOfSamples = 150; // \u6837\u672c\u6570\n    const convertedData = trainingData\n      .map(({ xs, ys }) => {\n        const labels = [\n          ys.species == 'setosa' ? 1 : 0,\n          ys.species == 'virginica' ? 1 : 0,\n          ys.species == 'versicolor' ? 1 : 0,\n        ];\n        return { xs: Object.values(xs), ys: Object.values(labels) };\n      })\n      .batch(10);\n  \n    const model = tf.sequential();\n    // \u6dfb\u52a0\u5177\u6709\u4e94\u4e2a\u795e\u7ecf\u5143\u7684\u9690\u85cf\u5c42\u4f5c\u4e3a\u8f93\u5165\n    model.add(tf.layers.dense({ inputShape: [numOfFeatures], activation: 'sigmoid', units: 5 }));\n    //  \u4e09\u4e2a\u7c7b\u522b\u4f5c\u4e3a\u8f93\u51fa\n    model.add(tf.layers.dense({ activation: 'softmax', units: 3 }));\n  \n    // \u7f16\u8bd1\u6a21\u578b\uff1a\u5206\u7c7b\u4ea4\u53c9\u71b5\u635f\u5931 \u548c 0.06 \u7684\u5b66\u4e60\u7387\n    model.compile({ loss: 'categoricalCrossentropy', optimizer: tf.train.adam(0.06) });\n  \n    await model.fitDataset(convertedData, {\n      epochs: 100,\n      callbacks: {\n        onEpochEnd: async (epoch, logs) => {\n          console.log('Epoch: ' + epoch + ' Loss: ' + logs.loss);\n        },\n      },\n    });\n  \n    // Test Cases:\n  \n    // Setosa\n    const testVal = tf.tensor2d([4.4, 2.9, 1.4, 0.2], [1, 4]);\n  \n    // Versicolor\n    // const testVal = tf.tensor2d([6.4, 3.2, 4.5, 1.5], [1, 4]);\n  \n    // Virginica\n    // const testVal = tf.tensor2d([5.8,2.7,5.1,1.9], [1, 4]);\n  \n    const prediction = model.predict(testVal);\n    const pIndex = tf.argMax(prediction, 1).dataSync();\n  \n    const classNames = ['Setosa', 'Virginica', 'Versicolor'];\n  \n    alert(classNames[pIndex]);\n  }\n  run();\n"}],r=s(45);e.default=function(){var n=Object(o.useState)(0),e=Object(t.a)(n,2),s=e[0],a=e[1];return Object(r.jsx)("div",{className:c.a.wrap,children:l.map((function(n,e){return Object(r.jsxs)("div",{className:c.a.block,children:[Object(r.jsxs)("h3",{style:{paddingTop:20},onClick:function(){return Promise.resolve().then((function(){console.log(s),a(s+1),console.log(s),a(s+1),console.log(s)}))},children:["\u4f8b\u5b50",e+1,"\uff1a",n.title]}),Object(r.jsx)(i.a,{value:n.code})]},e)}))})}}}]);